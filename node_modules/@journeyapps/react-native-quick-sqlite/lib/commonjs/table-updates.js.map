{"version":3,"names":["updateCallbacks","transactionCallbacks","global","triggerUpdateHook","dbName","table","opType","rowId","callback","registerUpdateHook","exports","triggerTransactionFinalizerHook","eventType","registerTransactionHook"],"sources":["table-updates.ts"],"sourcesContent":["import { RowUpdateType, TransactionCallback, TransactionEvent, UpdateCallback } from './types';\n\nconst updateCallbacks: Record<string, UpdateCallback> = {};\nconst transactionCallbacks: Record<string, TransactionCallback> = {};\n\n/**\n * Entry point for update callbacks. This is triggered from C++ with params.\n */\nglobal.triggerUpdateHook = function (dbName: string, table: string, opType: RowUpdateType, rowId: number) {\n  const callback = updateCallbacks[dbName];\n  if (!callback) {\n    return;\n  }\n\n  callback({\n    opType,\n    table,\n    rowId\n  });\n  return null;\n};\n\nexport const registerUpdateHook = (dbName: string, callback: UpdateCallback) => {\n  updateCallbacks[dbName] = callback;\n};\n\n/**\n * Entry point for transaction callbacks. This is triggered from C++ with params.\n */\nglobal.triggerTransactionFinalizerHook = function (dbName: string, eventType: TransactionEvent) {\n  const callback = transactionCallbacks[dbName];\n  if (!callback) {\n    return;\n  }\n\n  callback(eventType);\n  return null;\n};\n\nexport const registerTransactionHook = (dbName: string, callback: TransactionCallback) => {\n  transactionCallbacks[dbName] = callback;\n};\n"],"mappings":";;;;;;AAEA,MAAMA,eAA+C,GAAG,CAAC,CAAC;AAC1D,MAAMC,oBAAyD,GAAG,CAAC,CAAC;;AAEpE;AACA;AACA;AACAC,MAAM,CAACC,iBAAiB,GAAG,UAAUC,MAAc,EAAEC,KAAa,EAAEC,MAAqB,EAAEC,KAAa,EAAE;EACxG,MAAMC,QAAQ,GAAGR,eAAe,CAACI,MAAM,CAAC;EACxC,IAAI,CAACI,QAAQ,EAAE;IACb;EACF;EAEAA,QAAQ,CAAC;IACPF,MAAM;IACND,KAAK;IACLE;EACF,CAAC,CAAC;EACF,OAAO,IAAI;AACb,CAAC;AAEM,MAAME,kBAAkB,GAAGA,CAACL,MAAc,EAAEI,QAAwB,KAAK;EAC9ER,eAAe,CAACI,MAAM,CAAC,GAAGI,QAAQ;AACpC,CAAC;;AAED;AACA;AACA;AAFAE,OAAA,CAAAD,kBAAA,GAAAA,kBAAA;AAGAP,MAAM,CAACS,+BAA+B,GAAG,UAAUP,MAAc,EAAEQ,SAA2B,EAAE;EAC9F,MAAMJ,QAAQ,GAAGP,oBAAoB,CAACG,MAAM,CAAC;EAC7C,IAAI,CAACI,QAAQ,EAAE;IACb;EACF;EAEAA,QAAQ,CAACI,SAAS,CAAC;EACnB,OAAO,IAAI;AACb,CAAC;AAEM,MAAMC,uBAAuB,GAAGA,CAACT,MAAc,EAAEI,QAA6B,KAAK;EACxFP,oBAAoB,CAACG,MAAM,CAAC,GAAGI,QAAQ;AACzC,CAAC;AAACE,OAAA,CAAAG,uBAAA,GAAAA,uBAAA","ignoreList":[]}